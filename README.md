# Guest-app

Микросервис для работы с гостями на go и gin.

## Техническое задание
Написать микросервис работы с гостями используя язык программирования на выбор PHP или Go, можно пользоваться любыми opensource пакетами, также возможно реализовать с использованием фреймворков или без них. БД также любая на выбор, использующая SQL в качестве языка запросов.

Микросервис реализует API для CRUD операций над гостем. То есть принимает данные для создания, изменения, получения, удаления записей гостей хранящихся в выбранной базе данных.

Сущность "Гость" Имя, фамилия и телефон – обязательные поля. А поля телефон и email уникальны. В итоге у гостя должны быть следующие атрибуты: идентификатор, имя, фамилия, email, телефон, страна. Если страна не указана то доставать страну из номера телефона +7 - Россия и т.д.

Правила валидации нужно придумать и реализовать самостоятельно. Микросервис должен запускаться в Docker.

## Установка и настройка
После скачивания репозитория необходимо запустить команду:

```bash
./setup-env.sh
```
Данная команда скопирует env и установит нужные параметры (bearer-token для доступа к api, его необходимо будет добавлять в запросы для авторизации)

```bash
docker-compose up --build
```

Дальше необходимо зайти в контейнер командой:

## Описание API

Методы:

* POST /guests - Создать запись гостя.
* GET /guests/{id} - Получить информацию о госте по идентификатору.
* GET /guests - Получить список гостей.
* PUT /guests/{id} - Обновить информацию о госте.
* DELETE /guests/{id} - Удалить запись гостя.


### CreateGuest

Вход: JSON объект гостя в теле запроса.
Выход: Статус 201 с данными созданного гостя или статус 400/500 с информацией об ошибке.

### GetGuestById

Вход: ID гостя как параметр URL.
Выход: Статус 200 с данными гостя или статус 400/404 с информацией об ошибке.

### GetGuest

Вход: Нет входных параметров.
Выход: Статус 200 с массивом гостей или статус 404 с информацией об ошибке.

### UpdateGuest

Вход: ID гостя как параметр URL и JSON объект гостя в теле запроса.
Выход: Статус 200 с обновленными данными гостя или статус 400/404 с информацией об ошибке.

### DeleteGuest

Вход: ID гостя как параметр URL.
Выход: Статус 200 с сообщением об удалении или статус 400/404 с информацией об ошибке.

Так же в гите проекта лежит файл postman-коллекции, в которой тоже описаны все параметры и роуты, которые используются для API.

## Примечание

Данный микросервис был разработан как тестовое задание, к нему был написан файл докера, который, в силу некоторых особенностей среды разработки, может не всем подойти.

В проекте использовались следующие контейнеры:
go 1.18, postgres
